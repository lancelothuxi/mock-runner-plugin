<idea-plugin>
    <id>com.example.myplugin</id>
    <name>My Custom Runner Plugin</name>
    <vendor email="support@example.com" url="https://www.example.com">Example Company</vendor>
    
    <description><![CDATA[
        A plugin that adds custom Run/Debug configurations similar to JProfiler.
        Allows you to run or debug applications with custom settings.
    ]]></description>
    
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    
    <extensions defaultExtensionNs="com.intellij">
        <!-- 注册自定义程序运行器 - Run 模式 -->
        <programRunner implementation="com.example.plugin.MockRunner"/>
        
        <!-- 注册自定义程序运行器 - Debug 模式 -->
        <programRunner implementation="com.example.plugin.MockDebugRunner"/>
        
        <!-- 注册自定义执行器 - Run with Mock -->
        <executor implementation="com.example.plugin.MockRunExecutor" order="last"/>
        
        <!-- 注册自定义执行器 - Debug with Mock -->
        <executor implementation="com.example.plugin.MockDebugExecutor" order="last"/>
        
        <!-- 注册 RunConfiguration 扩展 - 自动添加 Mock Agent -->
        <runConfigurationExtension implementation="com.example.plugin.extension.MockRunConfigurationExtension"/>
        
        <!-- 注册 ToolWindow - 改为右侧边栏，使用自定义图标 -->
        <toolWindow id="Mock Runner" 
                    anchor="right" 
                    factoryClass="com.example.plugin.ui.RunnerToolWindowFactory"
                    icon="/icons/mockRunner.svg"/>
        
        <!-- 注册 Service -->
        <projectService serviceImplementation="com.example.plugin.ui.MockRunnerToolWindowContent"/>
        <projectService serviceImplementation="com.example.plugin.service.MockConfigService"/>
        
        <!-- 注册 LineMarker - 显示 Mock 图标 -->
        <codeInsight.lineMarkerProvider 
            language="JAVA" 
            implementationClass="com.example.plugin.marker.MockedMethodLineMarkerProvider"/>
    </extensions>
    
    <actions>
        <!-- 添加右键菜单 -->
        <action id="AddMockAction" 
                class="com.example.plugin.action.AddMockAction" 
                text="Add Mock for Method"
                description="Add mock configuration for the selected method">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </action>
    </actions>
</idea-plugin>
